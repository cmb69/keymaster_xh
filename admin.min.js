keymaster.getTime=function(){var a=keymaster.baseUrl+"?&keymaster_time",b=new XMLHttpRequest;b.open("GET",a),b.onreadystatechange=function(){if(b.readyState==4&&b.status==200){var c=+b.responseText;c!=c?(window.clearInterval(keymaster.timer),window.confirm(keymaster.text.error)&&window.open(a)):c<0?window.location.href=window.location.href:c==0?window.location.href=keymaster.baseUrl+"?&logout":c<keymaster.warn?(keymaster.updateWarning(c),keymaster.dialog.style.display="block"):keymaster.dialog.style.display="none"}},b.send(null)},keymaster.reset=function(){var a=new XMLHttpRequest;a.open("POST",keymaster.baseUrl),a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),a.send("keymaster_reset"),keymaster.dialog.style.display="none"},keymaster.warning=function(){var a=document.createElement("div");a.id="keymaster",a.style.display="none";var b=document.createElement("div");b.className="keymaster_message";var c=document.createElement("p"),d=document.createTextNode("");keymaster.warningText=d,c.appendChild(d),b.appendChild(c);var e=document.createElement("div");e.className="keymaster_buttons";var f=document.createElement("button");f.onclick=keymaster.reset;var d=document.createTextNode(keymaster.text.button);f.appendChild(d),e.appendChild(f),b.appendChild(e),a.appendChild(b),document.body.appendChild(a),keymaster.dialog=a},keymaster.updateWarning=function(a){var b=Math.ceil(a/60),c=b==1?keymaster.text.warning_singular:b>=2&&b<=4?keymaster.text.warning_paucal:keymaster.text.warning_plural;keymaster.warningText.nodeValue=c.replace(/{{{TIME}}}/,b)},keymaster.init=function(){keymaster.warning(),keymaster.timer=window.setInterval(keymaster.getTime,keymaster.pollInterval)},typeof window.addEventListener!="undefined"?window.addEventListener("load",keymaster.init,!1):typeof window.attachEvent!="undefined"&&window.attachEvent("onload",keymaster.init)